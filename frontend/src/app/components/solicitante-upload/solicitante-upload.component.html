<!-- solicitante-upload.component.html -->
<div class="upload-container">
  <div class="upload-card">
    <!-- Header -->
    <div class="card-header">
      <div class="icon-wrapper">
        <span class="upload-icon">üì§</span>
      </div>
      <h2>Subir Documento para Revisi√≥n</h2>
      <p class="subtitle">Env√≠a tu archivo PDF y recibir√°s una notificaci√≥n con el resultado</p>
    </div>

    <!-- Formulario -->
    <form (ngSubmit)="subir()" #uploadForm="ngForm" class="upload-form">
      
      <!-- Email Input -->
      <div class="form-group">
        <label for="email" class="form-label">
          <span class="label-icon">üìß</span>
          Correo Electr√≥nico
          <span class="required">*</span>
        </label>
        <input 
          type="email" 
          id="email"
          name="email"
          [(ngModel)]="email"
          #emailInput="ngModel"
          required
          email
          placeholder="ejemplo@correo.com"
          class="form-input"
          [class.input-error]="emailInput.invalid && emailInput.touched"
          [class.input-success]="emailInput.valid && emailInput.touched"
        />
        
        <!-- Mensajes de error para email -->
        <div class="error-message" *ngIf="emailInput.invalid && emailInput.touched">
          <span class="error-icon">‚ö†Ô∏è</span>
          <span *ngIf="emailInput.errors?.['required']">El correo electr√≥nico es obligatorio</span>
          <span *ngIf="emailInput.errors?.['email']">Ingresa un correo electr√≥nico v√°lido</span>
        </div>
        
        <!-- Mensaje de √©xito -->
        <div class="success-message" *ngIf="emailInput.valid && emailInput.touched">
          <span class="success-icon">‚úì</span>
          Correo v√°lido
        </div>
      </div>

      <!-- File Input -->
      <div class="form-group">
        <label for="file" class="form-label">
          <span class="label-icon">üìé</span>
          Archivo PDF
          <span class="required">*</span>
        </label>
        
        <div class="file-input-wrapper" 
             [class.has-file]="selectedFile"
             [class.file-error]="!selectedFile && attemptedSubmit">
          <input 
            type="file" 
            id="file"
            name="file"
            accept="application/pdf"
            (change)="onFileChange($event)"
            class="file-input"
            #fileInput
          />
          <div class="file-input-display">
            <div class="file-icon">
              <span *ngIf="!selectedFile">üìÑ</span>
              <span *ngIf="selectedFile" class="file-success">‚úì</span>
            </div>
            <div class="file-text">
              <span class="file-main-text" *ngIf="!selectedFile">
                Arrastra tu archivo PDF aqu√≠ o haz clic para seleccionar
              </span>
              <span class="file-main-text file-selected" *ngIf="selectedFile">
                {{ selectedFile.name }}
              </span>
              <span class="file-sub-text">
                Solo archivos PDF
              </span>
            </div>
            <button 
              type="button" 
              class="btn-select-file"
              (click)="fileInput.click()"
              *ngIf="!selectedFile"
            >
              Seleccionar
            </button>
            <button 
              type="button" 
              class="btn-remove-file"
              (click)="removeFile()"
              *ngIf="selectedFile"
            >
              Eliminar
            </button>
          </div>
        </div>

        <!-- Error de archivo -->
        <div class="error-message" *ngIf="!selectedFile && attemptedSubmit">
          <span class="error-icon">‚ö†Ô∏è</span>
          Debes seleccionar un archivo PDF
        </div>

        <!-- Informaci√≥n del archivo -->
        <div class="file-info" *ngIf="selectedFile">
          <span class="info-icon">‚ÑπÔ∏è</span>
          Tama√±o: {{ formatFileSize(selectedFile.size) }}
        </div>
      </div>

      <!-- Bot√≥n de env√≠o -->
      <div class="form-actions">
        <button 
          type="submit" 
          class="btn-submit"
          [disabled]="isUploading"
          [class.uploading]="isUploading"
        >
          <span *ngIf="!isUploading">
            <span class="btn-icon">üöÄ</span>
            Subir Documento
          </span>
          <span *ngIf="isUploading">
            <span class="spinner"></span>
            Subiendo...
          </span>
        </button>
      </div>
    </form>

    <!-- Notificaci√≥n de √©xito -->
    <div class="notification success" *ngIf="showSuccessNotification" [@slideIn]>
      <div class="notification-icon">‚úì</div>
      <div class="notification-content">
        <h4>¬°Documento subido exitosamente!</h4>
        <p>ID del documento: <strong>{{ uploadedDocId }}</strong></p>
        <p>Recibir√°s una notificaci√≥n por correo cuando sea revisado.</p>
      </div>
      <button class="notification-close" (click)="showSuccessNotification = false">√ó</button>
    </div>

    <!-- Notificaci√≥n de error -->
    <div class="notification error" *ngIf="showErrorNotification" [@slideIn]>
      <div class="notification-icon">‚úó</div>
      <div class="notification-content">
        <h4>Error al subir el documento</h4>
        <p>{{ errorMessage }}</p>
      </div>
      <button class="notification-close" (click)="showErrorNotification = false">√ó</button>
    </div>
  </div>
</div>